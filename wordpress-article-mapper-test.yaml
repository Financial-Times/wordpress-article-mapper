videoSiteConfig:
    - urlPattern: "https?://www.youtube.com/watch\\?v=(?<id>[A-Za-z0-9_-]+)"
      template: "https://www.youtube.com/watch?v=%s"
      embedded: true
      retainedParams: ["t"]
      forceHTTPS: true

    - urlPattern: "https?://www.youtube.com/embed/(?<id>[A-Za-z0-9_-]+)"
      template: "https://www.youtube.com/watch?v=%s"
      embedded: false
      convertedParams:
          - convertFromParameter: "start"
            convertedToParameter: "t"
            conversionTemplate: "%ss"
      forceHTTPS: true

    - urlPattern: "https?://youtu.be/(?<id>[A-Za-z0-9_-]+)"
      template: "https://www.youtube.com/watch?v=%s"
      embedded: false
      retainedParams: ["t"]
      forceHTTPS: true

    - urlPattern: "https?://vimeo.com/(?<id>[0-9]+)"
      template: null
      embedded: false
      forceHTTPS: true

    - urlPattern: "//player.vimeo.com/video/(?<id>[0-9]+)"
      template: "https://www.vimeo.com/%s"
      embedded: true
      forceHTTPS: true

    - urlPattern: "https?://video.ft.com/(?<id>[0-9]+)/"
      template: null
      embedded: false

blogApiEndpointMetadata:
    - host: blogs.ft.com/the-world
      brands: ["http://api.ft.com/things/806d05b8-3d29-4e81-8668-e9cdae0ab086","http://api.ft.com/things/dbb0bdae-1f0c-11e4-b0cb-b2227cce2b54"]
      id: FT-LABS-WP-1-2
    - host: blogs.ft.com/westminster
      brands: ["http://api.ft.com/things/5e5dba2b-8031-4a65-b193-84a58882c62e","http://api.ft.com/things/dbb0bdae-1f0c-11e4-b0cb-b2227cce2b54"]
      id: FT-LABS-WP-1-12
    - host: ftalphaville.ft.com
      brands: ["http://api.ft.com/things/89d15f70-640d-11e4-9803-0800200c9a66","http://api.ft.com/things/dbb0bdae-1f0c-11e4-b0cb-b2227cce2b54"]
      id: FT-LABS-WP-1-24
    - host: www.ft.com/fastft
      brands: ["http://api.ft.com/things/5c7592a8-1f0c-11e4-b0cb-b2227cce2b54","http://api.ft.com/things/dbb0bdae-1f0c-11e4-b0cb-b2227cce2b54"]
      id: FT-LABS-WP-1-335
      syndication: "yes"

urlResolverConfiguration:
  patterns: ["https?:\\/\\/on\\.ft\\.com/.*","https?:\\/\\/bit\\.ly/.*"]
  threadPoolSize: 8
  linksPerThread: 4
  resolverConfiguration:
    timeout: 5000ms
  documentStoreConfiguration:
    endpointConfiguration:
        shortName: "documentStore"
        jerseyClient:
            timeout: 5000ms
        primaryNodes: ["localhost:8080"]
        secondaryNodes: null
        resilienceStrategy: LOAD_BALANCED_IP_STRATEGY
    hostHeader: "document-store-api"
  contentReadConfiguration:
    endpointConfiguration:
        shortName: "content-read"
        path: content/
        jerseyClient:
            timeout: 5000ms
        primaryNodes: ["localhost:8080"]
        secondaryNodes: null
        resilienceStrategy: LOAD_BALANCED_IP_STRATEGY
    hostHeader: "document-store-api"

contentUriPrefix: http://wordpress-article-mapper.svc.ft.com/content

server:

  applicationConnectors:
    - type: http
      port: 14080

  adminConnectors:
      - type: http
        port: 14081

  requestLog:

    appenders:
      - type: console
        # The timezone used to format dates. HINT: USE THE DEFAULT, UTC.
        timeZone: UTC

logging:

  level: INFO

  loggers:
    io.dropwizard: DEBUG

  appenders:
    - type: console
      logFormat: "%-5p [%d{ISO8601, GMT}] %c: %X{transaction_id} %m [%thread]%n%xEx"

consumer:
  jerseyClient:
    connectionTimeout: 2 seconds
    timeout: 25 seconds
  messageConsumer:
    queueProxyHost: http://localhost:8080
    queue: kafka
    topicName: NativeCmsPublicationEvents
    groupName: WordpressArticleMapper
    backoffPeriod: 10000
    streamCount: 1
    autoCommit: true
    offsetReset: largest
  healthCheck:
    name: "Can connect consumer to kafka-proxy"
    severity: 2
    businessImpact: "Newly published Wordpress articles will not be available from the Content API"
    technicalSummary: "Tests that kafka-proxy is reachable and message can be consumed"
    panicGuideUrl: "https://dewey.ft.com/up-wam.html"
  systemCode: wordpress

producer:
    jerseyClient:
      connectionTimeout: 2 seconds
      timeout: 25 seconds
    messageProducer:
      proxyHostAndPort: localhost:8080
      additionalHeaders:
        Host: kafka
      topicName: CmsPublicationEvents
    healthCheck:
      name: "Can connect producer to kafka-proxy"
      severity: 2
      businessImpact: "Newly published Wordpress articles will not be available from the Content API"
      technicalSummary: "Tests that kafka-proxy is reachable and the CmsPublicationEvents topic exists"
      panicGuideUrl: "https://dewey.ft.com/up-wam.html"

canonicalWebUrlTemplate: "https://www.ft.com/content/%s"